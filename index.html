<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cosmic Defender</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Exo+2:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Compact Header -->
        <header class="header">
            <div class="logo-section">
                <div class="logo">
                    <i class="fas fa-satellite-dish"></i>
                    <h1>CD</h1>
                </div>
                
                <div class="game-state-compact">
                    <div class="state-item">
                        <i class="fas fa-shield-alt"></i>
                        <span id="lives">1500</span>
                    </div>
                    <div class="state-item">
                        <i class="fas fa-coins"></i>
                        <span id="gold">1000</span>
                    </div>
                    <div class="state-item">
                        <i class="fas fa-gem"></i>
                        <span id="crystalsCount">0</span>
                    </div>
                    <div class="state-item">
                        <i class="fas fa-robot"></i>
                        <span id="enemiesLeftMini">10</span>
                    </div>
                </div>
            </div>
            
            <div class="wave-controls">
                <div class="wave-info">
                    <span>СЕТ <strong id="set">1</strong>/5</span>
                    <span class="separator">|</span>
                    <span>ВОЛНА <strong id="currentWave">1</strong></span>
                </div>
                <div class="controls">
                    <button id="startWave" class="control-btn start-btn">
                        <i class="fas fa-play"></i>
                        <span class="btn-text">СТАРТ</span>
                    </button>
                    <button id="pauseGame" class="control-btn-icon pause-btn">
                        <i class="fas fa-pause"></i>
                    </button>
                    <button id="fastForward" class="control-btn-icon speed-btn">
                        <i class="fas fa-forward"></i>
                    </button>
                    <button id="shopBtn" class="control-btn-icon shop-btn">
                        <i class="fas fa-shopping-cart"></i>
                    </button>
                    <button id="infoBtn" class="control-btn-icon info-btn">
                        <i class="fas fa-info"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Game Area -->
        <main class="game-area">
            <!-- Game Board -->
            <div class="game-board">
                <canvas id="gameCanvas"></canvas>
                
                <!-- Selection Indicator -->
                <div class="selection-indicator" id="selectionIndicator">
                    <i class="fas fa-crosshairs"></i>
                    <span id="selectionText">Выберите станцию</span>
                </div>
                
                <!-- Tower Info Panel -->
                <div class="tower-info-compact" id="towerInfoPanel">
                    <div class="tower-info-header">
                        <h4><i class="fas fa-satellite"></i> <span id="towerName">ЛАЗЕРНАЯ СТАНЦИЯ</span></h4>
                        <button class="close-btn" id="closeTowerInfo">&times;</button>
                    </div>
                    <div class="tower-info-body">
                        <div class="tower-stats-mini">
                            <div class="tower-stat-mini">
                                <span class="stat-label-mini">Уровень</span>
                                <div class="level-center" id="towerLevelCenter">1</div>
                            </div>
                            <div class="tower-stat-mini">
                                <span class="stat-label-mini">Урон</span>
                                <span class="stat-value-mini" id="towerDamage">25</span>
                            </div>
                            <div class="tower-stat-mini">
                                <span class="stat-label-mini">Дальность</span>
                                <span class="stat-value-mini" id="towerRange">180</span>
                            </div>
                            <div class="tower-stat-mini">
                                <span class="stat-label-mini">Скорость</span>
                                <span class="stat-value-mini" id="towerSpeed">1.2s</span>
                            </div>
                        </div>
                        <div class="tower-actions-mini">
                            <button id="upgradeTower" class="action-btn-mini upgrade-btn">
                                <i class="fas fa-arrow-up"></i>
                                <span>Улучшить</span>
                                <span class="cost" id="upgradeCost">150</span>
                            </button>
                            <button id="sellTower" class="action-btn-mini sell-btn">
                                <i class="fas fa-coins"></i>
                                <span>Продать</span>
                                <span class="cost" id="sellValue">120</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Ultra Compact Sidebar -->
            <aside class="sidebar-compact">
                <!-- Stations Shop -->
                <div class="shop-section-compact">
                    <div class="section-header-mini">
                        <i class="fas fa-rocket"></i>
                        <h3>СТАНЦИИ</h3>
                    </div>
                    
                    <div class="stations-grid" id="stationsGrid">
                        <!-- Станции будут добавлены через JS -->
                    </div>
                </div>

                <!-- Base Info -->
                <div class="base-section-mini">
                    <div class="section-header-mini">
                        <i class="fas fa-space-station"></i>
                        <h3>БАЗА</h3>
                    </div>
                    
                    <div class="base-info-compact">
                        <div class="base-level-display">
                            <span class="base-level-label">Уровень</span>
                            <span class="base-level-value" id="baseLevel">1</span>
                        </div>
                        <button class="base-upgrade-btn-compact" id="upgradeBase">
                            <i class="fas fa-arrow-up"></i>
                            <span>Улучшить</span>
                            <span class="cost" id="baseUpgradeCost">500</span>
                        </button>
                    </div>
                    
                    <div class="base-bonuses">
                        <div class="bonus-item">
                            <i class="fas fa-bolt"></i>
                            <span>Атака: <strong id="baseAttack">+0%</strong></span>
                        </div>
                        <div class="bonus-item">
                            <i class="fas fa-coins"></i>
                            <span>Доход: <strong id="baseIncome">+50</strong></span>
                        </div>
                        <div class="bonus-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Места: <strong id="availableSlots">5/12</strong></span>
                        </div>
                        <div class="bonus-item">
                            <i class="fas fa-robot"></i>
                            <span>Дроны: <strong id="dronesCountMini">2</strong>/<span id="maxDronesMini">2</span></span>
                        </div>
                    </div>
                </div>
                
                <!-- Next Wave Preview -->
                <div class="wave-preview-mini">
                    <div class="section-header-mini">
                        <i class="fas fa-wave-square"></i>
                        <h3>ВОЛНА <span id="currentWaveSidebar">1</span></h3>
                    </div>
                    
                    <div class="wave-info-detailed">
                        <div class="wave-stats">
                            <div class="wave-stat">
                                <i class="fas fa-robot"></i>
                                <span>Атакуют: <strong id="waveAttacking">10</strong></span>
                            </div>
                            <div class="wave-stat">
                                <i class="fas fa-skull"></i>
                                <span>Убито: <strong id="waveKilled">0</strong></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="enemy-preview-mini" id="wavePreview">
                        <!-- Динамический контент -->
                    </div>
                </div>
            </aside>
        </main>
        
        <!-- Minimal Footer -->
        <footer class="game-footer-mini">
            <div class="message-bar" id="messageBar">
                <i class="fas fa-info-circle"></i>
                <span id="messageText">Выберите станцию для установки на поле</span>
            </div>
            <div class="footer-right">
                <div class="high-score">
                    <i class="fas fa-trophy"></i>
                    <span>РЕКОРД: <strong id="highscore">0</strong></span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Info Modal -->
    <div class="modal-overlay" id="infoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-graduation-cap"></i> ОБУЧЕНИЕ</h2>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content loaded via JS -->
            </div>
        </div>
    </div>

    <!-- Shop Modal -->
    <div class="modal-overlay" id="shopModal">
        <div class="modal-content shop-modal">
            <div class="modal-header">
                <h2 class="modal-title"><i class="fas fa-shopping-cart"></i> МАГАЗИН</h2>
                <button class="close-modal" id="closeShop">&times;</button>
            </div>
            <div class="modal-body shop-body">
                <div class="shop-currency">
                    <div class="currency-display">
                        <i class="fas fa-gem" style="color: #9d4edd;"></i>
                        <span class="currency-label">КРИСТАЛЛЫ:</span>
                        <span class="currency-value" id="crystalsAmount">0</span>
                    </div>
                </div>
                
                <div class="shop-tabs">
                    <button class="shop-tab active" data-tab="weapons">Оружие</button>
                    <button class="shop-tab" data-tab="satellites">Спутники</button>
                    <button class="shop-tab" data-tab="harvesters">Харвестеры</button>
                    <button class="shop-tab" data-tab="cosmetics">Косметика</button>
                </div>
                
                <div class="shop-items" id="shopItems">
                    <!-- Динамически загружается -->
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div class="modal-overlay" id="gameOverModal" style="display: none;">
        <div class="modal-content game-over-modal">
            <div class="game-over-header defeat" id="gameOverHeader">
                <h2>ПОРАЖЕНИЕ</h2>
                <p>База уничтожена</p>
            </div>
            <div class="game-over-body">
                <div class="game-over-stats">
                    <div class="stat">
                        <span class="stat-label">Достигнут сет</span>
                        <span class="stat-value" id="gameOverSet">1</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Волна</span>
                        <span class="stat-value" id="gameOverWave">1</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Кредиты</span>
                        <span class="stat-value" id="gameOverCredits">1000</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Врагов убито</span>
                        <span class="stat-value" id="gameOverKills">0</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Кристаллы</span>
                        <span class="stat-value" id="gameOverCrystals">0</span>
                    </div>
                </div>
                <button id="restartGame" class="restart-btn">
                    <i class="fas fa-redo"></i>
                    НОВАЯ ИГРА
                </button>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
